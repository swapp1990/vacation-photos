# 2026-01-19 - App Clip TestFlight Testing & Size Fix

## App Clip Size Problem
- Build 7: App Clip was 42MB - way over 10MB limit
- Root cause: Podfile included React Native dependencies for VacationPhotosClip target
- Fix: Made App Clip pure SwiftUI with no pods
```ruby
target 'VacationPhotosClip' do
  # No pods needed - App Clip is pure SwiftUI
end
```
- Result: App Clip went from 42MB to 2.84MB

## Version Sync Issues
- Build 8 didn't appear in App Store Connect - it was duplicate of build 7
- Had to sync versions across 4 files:
  - app.json (buildNumber)
  - ios/VacationPhotos/Info.plist (CFBundleVersion)
  - ios/VacationPhotosClip/Info.plist (CFBundleVersion)
  - project.pbxproj (CURRENT_PROJECT_VERSION for App Clip target)
- Build 9 finally showed up correctly

## TestFlight App Clip Testing
- Clicking App Clip URLs gives "not available in your country or region"
- This is expected - URL invocation doesn't work until published to App Store
- To test in TestFlight:
  1. Configure App Clip Invocations in App Store Connect (TestFlight → Build → App Clip Invocations)
  2. Open TestFlight app on iPhone
  3. Go to the app
  4. See App Clip invocations configured
  5. Tap to test

## App Clip Invocation URL Update
- Updated from old github.io format to new appclip.apple.com format
- New URL: `https://appclip.apple.com/id?p=com.swapp1990.vacationphotos.Clip&token=test123&location=Test%20Vacation`

## Key Learnings
- App Clips must be under 10MB (thinned binary)
- React Native dependencies make App Clips way too large
- Pure SwiftUI is the way to go for App Clips
- TestFlight URL invocations don't work - use the TestFlight app directly
