# 2026-01-17 - App Clip & Refactoring

## The Gap
- Sharing works great if friend has the app
- But what if they don't?
- Link does nothing without app installed

## Location Editing Feature
- Sometimes auto-detected location is wrong
- Added ability to edit vacation location name
- Created reusable LocationSearchModal component
- Uses OpenStreetMap Nominatim for search

## App.js Was a Monster
- 1989 lines in single file
- Hard to navigate and maintain

## Refactoring
- Extracted hooks: usePhotoLoading, useEditedLocations, etc.
- Moved utilities to separate files
- Down to 939 lines - much cleaner

## App Clip Research
- iOS feature for instant app experiences
- <10MB, loads without install
- Perfect for "view shared photos" use case

## App Clip Implementation
- Expo config plugin to set up App Clip target
- Simplified photo viewer (no uploads, no contacts)
- App Group storage for handoff to full app

## Universal Links
- Custom scheme doesn't work without app
- Need HTTPS links that iOS recognizes
- Chose GitHub Pages: `swapp1990.github.io/share/{shareId}`

## Challenge: Xcode Package
- xcode npm package doesn't support App Clip targets
- Can't programmatically add App Clip target
- Workaround: generate files, manual Xcode setup

## AASA File
- Apple App Site Association file
- Tells iOS which app handles which URLs
- Needs TEAM_ID filled in manually

## Documentation
- Created docs/APP_CLIP.md
- Created docs/CLOUDKIT_SHARING.md
- Technical breakdowns of both features

## Remaining Setup
- Host AASA file on GitHub Pages
- Manual Xcode target creation
- TestFlight testing

## End of Day
- Sharing flow complete for installed users
- App Clip ready for non-installed users (needs Xcode setup)
- Codebase much cleaner after refactor
