# 2026-01-13 - Major Fixes Day

## iCloud Photo Issue
- Users reported blank thumbnails on some photos
- Problem: iCloud photos not fully downloaded to device
- Solution: Handle gracefully with placeholder, don't crash

## Performance Problems
- "Load More" was jumping to wrong photos
- Thumbnails not rendering for some images
- Root cause: photo processing was inconsistent

## Clustering Accuracy
- Location names were wrong for some trips
- Example: Paris trip showing "Charles de Gaulle Airport" instead of "Paris"
- Fix: Use day-first approach - name based on where you spent the day, not first photo location

## Home Detection Bug
- Some users' home wasn't detected correctly
- Was using first photo location instead of most frequent
- Fixed the algorithm to properly identify home

## Cluster Merging
- Same-location trips with overlapping dates weren't merging
- Two cards for same vacation
- Fixed merge logic to handle date overlaps

## UI Improvements
- Added distance badge showing "450 mi from home"
- Added progress bar during photo loading
- Parallel loading for faster performance

## Auto-Refresh
- Photos taken while app is backgrounded weren't showing
- Added foreground detection to re-scan for new photos

## Year Grouping Feature
- Requested feature: group vacations by year
- Added collapsible year sections
- "2025" header with vacations underneath

## Refactoring
- App.js was getting messy
- Extracted photo processing into utilities
- Cleaner component structure

## End of Day
- 8 commits - biggest day so far
- App feels much more polished
